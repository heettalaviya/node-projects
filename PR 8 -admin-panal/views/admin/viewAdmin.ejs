<%- include('../header') %>

<div class="page-wrapper">
    <div class="container-fluid py-4">

        <!-- Page Title -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h3 class="fw-bold">Admin Management</h3>

            <a href="/admin/add-admin" class="btn btn-primary rounded-3 shadow-sm">
                + Add Admin
            </a>
        </div>

        <!-- Search Box -->
        <div class="card border-0 shadow-sm rounded-4 mb-4">
            <div class="card-body">
                <input type="text" id="searchInput"
                    class="form-control rounded-3"
                    placeholder="Search admin...">
            </div>
        </div>

        <!-- Table Card -->
        <div class="card border-0 shadow-lg rounded-4">
            <div class="card-body p-0">

                <div class="table-responsive">
                    <table class="table align-middle mb-0" id="adminTable">

                        <thead class="table-light">
                            <tr>
                                <th>#</th>
                                <th>Profile</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Gender</th>
                                <th>Hobbies</th>
                                <th>Contact</th>
                                <th>Action</th>
                            </tr>
                        </thead>

                        <tbody>

                            <% admin.forEach((val,i)=>{ %>
                                <tr class="hover-shadow">

                                    <td><%= i+1 %></td>

                                    <!-- Image -->
                                    <td>
                                        <img src="<%= val.profileImage %>"
                                            class="rounded-circle border"
                                            width="45" height="45"
                                            style="object-fit:cover;">
                                    </td>

                                    <!-- Name -->
                                    <td class="fw-semibold">
                                        <%= val.firstname %> <%= val.lastname %>
                                    </td>

                                    <td><%= val.email %></td>

                                    <!-- Gender Badge -->
                                    <td>
                                        <% if(val.gender === 'Male'){ %>
                                            <span class="badge bg-primary">Male</span>
                                        <% } else { %>
                                            <span class="badge bg-pink text-dark">Female</span>
                                        <% } %>
                                    </td>

                                    <!-- Hobbies -->
                                    <td>
                                        <span class="text-muted">
                                            <%= val.hobbies %>
                                        </span>
                                    </td>

                                    <td><%= val.mobileno %></td>

                                    <!-- Actions -->
                                    <td>
                                        <a href="/admin/edit-admin/<%= val.id %>"
                                            class="btn btn-sm btn-success rounded-3 me-2">
                                            Edit
                                        </a>

                                        <a href="/admin/delete-admin/<%= val.id %>"
                                            class="btn btn-sm btn-danger rounded-3"
                                            onclick="return confirm('Delete this admin?')">
                                            Delete
                                        </a>
                                    </td>

                                </tr>
                            <% }) %>

                        </tbody>

                    </table>
                </div>

            </div>
        </div>

    </div>
</div>

<!-- Search Script -->
<script>
    const searchInput = document.getElementById("searchInput");

    searchInput.addEventListener("keyup", function () {
        const filter = this.value.toLowerCase();
        const rows = document.querySelectorAll("#adminTable tbody tr");

        rows.forEach(row => {
            row.style.display =
                row.innerText.toLowerCase().includes(filter)
                    ? ""
                    : "none";
        });
    });
</script>

<!-- Extra Styling -->
<style>
    .hover-shadow:hover {
        background: #f8f9fa;
        transition: 0.3s;
    }

    .bg-pink {
        background-color: #f8d7ff;
    }
</style>

<%- include('../footer') %>
