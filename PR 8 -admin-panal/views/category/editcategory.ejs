<%- include('../header')%>

<div class="page-wrapper">
    <div class="container-fluid">

        <!-- Page Title -->
        <div class="row mb-4">
            <div class="col-12 text-center">
                <h3 class="fw-bold">Update Category</h3>
                <p class="text-muted">Edit your category details</p>
            </div>
        </div>

        <!-- Form Card -->
        <div class="row justify-content-center">
            <div class="col-lg-5 col-md-7">

                <div class="card shadow-lg border-0 rounded-4">
                    <div class="card-body p-4">

                        <form action="/category/update-category/<%= category.id %>" 
                              method="post" 
                              enctype="multipart/form-data">

                            <!-- Category Name -->
                            <div class="mb-4">
                                <label class="form-label fw-semibold">
                                    Category Name
                                </label>

                                <input 
                                    type="text"
                                    name="categoryName"
                                    class="form-control form-control-lg rounded-3"
                                    placeholder="Enter category name"
                                    value="<%= category.categoryName %>"
                                    required
                                >
                            </div>

                            <!-- Current Image -->
                            <div class="mb-3">
                                <label class="form-label fw-semibold">
                                    Current Image
                                </label>

                                <div class="text-center">
                                    <img 
                                        src="<%= category.categoryImage %>"
                                        class="img-fluid rounded-3 shadow-sm"
                                        style="max-height:120px;"
                                    >
                                </div>
                            </div>

                            <!-- Upload New Image -->
                            <div class="mb-4">
                                <label class="form-label fw-semibold">
                                    Change Image
                                </label>

                                <div class="upload-box text-center p-4 border border-2 border-dashed rounded-3">

                                    <input 
                                        type="file"
                                        name="categoryImage"
                                        id="imageInput"
                                        class="form-control"
                                        accept="image/*"
                                    >

                                    <p class="text-muted mt-2 mb-0">
                                        Upload new image if you want to change
                                    </p>

                                    <!-- Preview -->
                                    <img 
                                        id="previewImage"
                                        src=""
                                        class="img-fluid mt-3 d-none rounded-3"
                                        style="max-height:150px;"
                                    >
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <div class="text-center">
                                <button class="btn btn-success px-5 py-2 rounded-3">
                                    <i class="mdi mdi-content-save"></i>
                                    Update Category
                                </button>
                            </div>

                        </form>

                    </div>
                </div>

            </div>
        </div>

    </div>
</div>

<%- include('../footer')%>

<!-- Image Preview Script -->
<script>
document.getElementById("imageInput").addEventListener("change", function(event) {
    const file = event.target.files[0];
    const preview = document.getElementById("previewImage");

    if (file) {
        preview.src = URL.createObjectURL(file);
        preview.classList.remove("d-none");
    }
});
</script>

<!-- Custom CSS -->
<style>
.upload-box {
    background: #f8f9fa;
    transition: 0.3s;
    cursor: pointer;
}
.upload-box:hover {
    background: #eef1f4;
}
.border-dashed {
    border-style: dashed !important;
}
</style>
